# 🔍 Phase 2 사용성 개선 검토

## 📋 발견된 문제점

### 1️⃣ 이전 기간 통계 조회 불가능
**문제**: 일별/주별/월별 통계가 현재 기간만 표시
- 일별: 최근 7일 고정
- 주별: 이번 주만
- 월별: 이번 달만
- **이전 데이터를 볼 수 없음**

**사용자 니즈**:
- "지난주 완료율은 얼마였지?"
- "이번 달과 지난 달 비교하고 싶어"
- "3주 전 생산성이 높았는데 뭐가 달랐을까?"

---

### 2️⃣ 미완료 항목 관리 부족
**문제**: 과거 미완료 작업을 완료하는 프로세스 없음
- 12월 20일에 계획했지만 완료 못한 작업
- 12월 29일에 다시 하고 싶은데 방법이 없음
- **오늘 날짜로 작업을 추가해도 원래 생성일을 잃어버림**

**사용자 니즈**:
- "지난주 못한 작업들을 이번 주에 하고 싶어"
- "미완료 작업만 모아서 보고 재계획하고 싶어"
- "원래 언제 계획했는지 기록을 남기고 싶어"

---

### 3️⃣ 작업 생명주기 혼란 🔴 (가장 심각)
**문제**: 작업의 상태 흐름이 불명확

#### 현재 플로우
```
STEP 1: Brain Dump
  ↓ (작성)
STEP 2: 분류하기 (우선순위 설정)
  ↓ (TOP 3 선택)
STEP 3: 행동하기 (TOP 3만 표시)
  ↓ (완료 체크)
???
```

#### 혼란 포인트
1. **STEP 2에 계속 남아있음**
   - TOP 3로 선정했는데도 분류하기 목록에 존재
   - "이미 행동하기로 넘어갔는데 왜 여기 있지?"

2. **중복 TOP 3 설정 가능**
   - 이미 TOP 3인데 또 설정 버튼 표시
   - 여러 번 설정하면 데이터 꼬임

3. **완료 후 처리 불명확**
   - 행동하기에서 완료해도 분류하기에 남음
   - "완료했는데 계속 보이네?"

---

## 🎯 해결 방안

### 1️⃣ 이전 기간 통계 조회 기능

#### 해결책: 날짜 네비게이션 추가

##### A. 일별 뷰
```
┌─────────────────────────────────┐
│ 일별 통계                        │
│                                 │
│ ◀ 이전 7일   [날짜 선택]  다음 7일 ▶ │
│                                 │
│ 2025-12-16 ~ 2025-12-22        │
│                                 │
│ [차트 및 통계...]               │
└─────────────────────────────────┘
```

##### B. 주별 뷰
```
┌─────────────────────────────────┐
│ 주별 통계                        │
│                                 │
│ ◀ 지난 주   [2025년 52주]  다음 주 ▶ │
│                                 │
│ 12월 23일(월) ~ 12월 29일(일)    │
│                                 │
│ [차트 및 통계...]               │
└─────────────────────────────────┘
```

##### C. 월별 뷰
```
┌─────────────────────────────────┐
│ 월별 통계                        │
│                                 │
│ ◀ 11월      [2025년 12월]  1월 ▶  │
│                                 │
│ [차트 및 통계...]               │
└─────────────────────────────────┘
```

#### 구현 방법
```javascript
let currentStatsDate = new Date()

function navigateDaily(direction) {
  const days = direction === 'prev' ? -7 : 7
  currentStatsDate.setDate(currentStatsDate.getDate() + days)
  loadDailyStats()
}

function navigateWeekly(direction) {
  const days = direction === 'prev' ? -7 : 7
  currentStatsDate.setDate(currentStatsDate.getDate() + days)
  loadWeeklyStats()
}

function navigateMonthly(direction) {
  const months = direction === 'prev' ? -1 : 1
  currentStatsDate.setMonth(currentStatsDate.getMonth() + months)
  loadMonthlyStats()
}
```

---

### 2️⃣ 미완료 항목 관리 기능

#### 해결책 A: 미완료 항목 전용 페이지 (권장) ⭐

##### UI 구조
```
┌──────────── 📋 미완료 작업 관리 ────────────┐
│                                            │
│ [전체: 15개] [지연: 5개] [오늘: 3개] [예정: 7개] │
│                                            │
│ ━━━━━━ 🔴 지연된 작업 (5개) ━━━━━━━━━━━━   │
│                                            │
│ ┌────────────────────────────────────────┐ │
│ │ 🔴 프로젝트 보고서 작성                 │ │
│ │ 📅 생성: 12/20 | ⚠️ 마감: 12/25        │ │
│ │ 🔴 4일 지연                             │ │
│ │                                        │ │
│ │ [수정] [오늘 다시하기] [연기] [삭제]     │ │
│ └────────────────────────────────────────┘ │
│                                            │
│ ━━━━━━ ⚠️ 오늘 마감 (3개) ━━━━━━━━━━━━   │
│ ┌────────────────────────────────────────┐ │
│ │ 🟡 회의 준비                            │ │
│ │ 📅 생성: 12/27 | ⏰ 오늘 17:00         │ │
│ │                                        │ │
│ │ [수정] [완료 처리] [연기]               │ │
│ └────────────────────────────────────────┘ │
│                                            │
│ ━━━━━━ 📅 예정 작업 (7개) ━━━━━━━━━━━━   │
│ [펼치기/접기]                              │
└────────────────────────────────────────────┘
```

##### 주요 기능
1. **오늘 다시하기**: 작업을 오늘 날짜로 복사
2. **연기**: 마감일 변경
3. **완료 처리**: 지금 바로 완료
4. **삭제**: 더 이상 안 함

##### 백엔드 API
```typescript
// GET /api/tasks/incomplete-overview
{
  overdue: [ /* 지연된 작업 */ ],
  today: [ /* 오늘 마감 */ ],
  upcoming: [ /* 예정 */ ],
  no_due_date: [ /* 마감일 없음 */ ]
}

// POST /api/tasks/:taskId/reschedule
{
  new_due_date: "2025-12-30"
}

// POST /api/tasks/:taskId/clone-to-today
// 작업을 오늘 날짜로 복사
```

---

### 3️⃣ 작업 생명주기 정리 🔴

#### 현재 문제 분석

##### 브레인 덤프 원칙
1. **Capture (수집)**: 모든 생각을 꺼내기
2. **Clarify (명확화)**: 각 항목이 무엇인지 정의
3. **Organize (정리)**: 우선순위 분류
4. **Reflect (검토)**: TOP 3 선정
5. **Engage (실행)**: 행동하기

##### 현재 시스템 문제
- STEP 2(분류)와 STEP 3(행동) 사이 경계 모호
- 상태 전이가 불명확

---

#### 해결책 B: 상태 기반 관리 (권장) ⭐⭐⭐

##### 작업 상태(step) 명확화
```
BRAIN_DUMP    → "아직 생각만 꺼낸 상태"
CATEGORIZED   → "우선순위 정한 상태"
ACTION        → "TOP 3로 선정됨, 행동 계획 있음"
COMPLETED     → "완료됨"
```

##### 새로운 플로우
```
STEP 1: Brain Dump
  ├─ [작성] → status=BRAIN_DUMP
  └─ "생각 꺼내기"

STEP 2: 분류하기
  ├─ [우선순위 설정] → step=CATEGORIZED
  ├─ "여기서는 분류만, 아직 행동 안 함"
  └─ ✅ TOP 3 설정 가능

STEP 3: 행동하기 (TOP 3만)
  ├─ [TOP 3 설정 시] → step=ACTION
  ├─ "행동 계획 작성"
  ├─ ❌ 분류하기에서 제거됨
  └─ ✅ 행동하기에만 표시

STEP 4: 완료
  ├─ [체크박스 클릭] → status=COMPLETED
  ├─ "이제 끝!"
  └─ ❌ 모든 STEP에서 숨김 (완료 필터로만 볼 수 있음)
```

##### UI 변경

###### STEP 2: 분류하기
```
🔴 긴급·중요
┌─────────────────────────────────┐
│ ☐ 프로젝트 A 마감               │
│ 오늘 17:00까지 완료             │
│                                 │
│ [✏️ 수정] [⭐ TOP 3 설정]      │  ← TOP 3 설정만 가능
└─────────────────────────────────┘

TOP 3 설정 시 → 즉시 STEP 3으로 이동, STEP 2에서 사라짐
```

###### STEP 3: 행동하기 (TOP 3)
```
TOP 3 (오늘의 핵심 행동)
┌─────────────────────────────────┐
│ ☐ 1. 프로젝트 A 마감            │
│ 📝 발표 자료 준비 및 리허설     │
│ 🕐 오후 (12:00-18:00)          │
│                                 │
│ [✏️ 수정] [✅ 완료]             │  ← 완료만 가능
└─────────────────────────────────┘

완료 체크 시 → status=COMPLETED, 모든 STEP에서 사라짐
```

##### 데이터베이스 로직
```typescript
// TOP 3 설정 시
UPDATE daily_tasks 
SET 
  step = 'ACTION',          // ← 명확한 상태 전이
  is_top3 = 1,
  top3_order = ?,
  action_detail = ?,
  time_slot = ?
WHERE task_id = ?

// 완료 처리 시
UPDATE daily_tasks
SET 
  status = 'COMPLETED',     // ← 완료 상태
  completed_at = CURRENT_TIMESTAMP
WHERE task_id = ?
```

##### 렌더링 로직 변경
```javascript
// STEP 2: 분류하기 - step이 CATEGORIZED인 것만
const categorizedTasks = allTasks.filter(t => 
  t.step === 'CATEGORIZED' && t.status !== 'COMPLETED'
)

// STEP 3: 행동하기 - step이 ACTION인 것만
const actionTasks = allTasks.filter(t => 
  t.step === 'ACTION' && t.is_top3 === 1
)

// STEP 4: 완료 목록 (선택적 표시)
const completedTasks = allTasks.filter(t => 
  t.status === 'COMPLETED'
)
```

---

#### 해결책 C: 1:N 구조 (복잡도 높음)

##### 컨셉
하나의 "작업 개념"에 여러 "행동 인스턴스"

```
daily_tasks (부모)
  ├─ task_id: 1
  ├─ title: "프로젝트 A 마감"
  └─ is_concept: true

action_instances (자식)
  ├─ instance_id: 1
  ├─ task_id: 1
  ├─ action_detail: "초안 작성"
  ├─ status: COMPLETED
  └─ completed_at: 2025-12-20
  
  ├─ instance_id: 2
  ├─ task_id: 1
  ├─ action_detail: "최종 검토"
  ├─ status: PENDING
  └─ due_date: 2025-12-30
```

##### 장단점
✅ **장점**:
- 하나의 큰 작업을 여러 번 실행 가능
- 진행 이력 추적 가능

❌ **단점**:
- DB 스키마 대폭 변경
- 복잡도 증가
- **브레인 덤프 원칙과 맞지 않음**

---

## 🎯 권장 방안

### 우선순위 정리

#### 🔴 즉시 수정 필요 (Priority 1)
**3번 문제: 작업 생명주기 정리**
- 해결책 B (상태 기반 관리) 채택
- 이유: 현재 로직 오류로 인한 버그, 사용자 혼란

#### 🟡 빠른 구현 권장 (Priority 2)
**1번 문제: 이전 기간 통계**
- 날짜 네비게이션 추가
- 이유: 사용자 요청 많음, 구현 간단

#### 🟢 점진적 개선 (Priority 3)
**2번 문제: 미완료 항목 관리**
- 미완료 전용 페이지 추가
- 이유: 복잡도 중간, 별도 기능으로 분리 가능

---

## 📋 구현 계획

### Phase 2.1: 작업 생명주기 수정 (필수) 🔴
1. ✅ `step` 상태 전이 로직 수정
2. ✅ TOP 3 설정 시 분류하기에서 제거
3. ✅ 완료 시 모든 STEP에서 숨김
4. ✅ 렌더링 로직 개선
5. ✅ 중복 TOP 3 설정 방지

**예상 시간**: 2~3시간
**복잡도**: 중간

### Phase 2.2: 통계 날짜 네비게이션 (권장) 🟡
1. ✅ 일별 네비게이션 (이전/다음 7일)
2. ✅ 주별 네비게이션 (이전/다음 주)
3. ✅ 월별 네비게이션 (이전/다음 달)
4. ✅ 날짜 선택 UI

**예상 시간**: 1~2시간
**복잡도**: 낮음

### Phase 2.3: 미완료 항목 관리 (선택) 🟢
1. ✅ 미완료 overview API
2. ✅ 미완료 전용 페이지
3. ✅ 오늘 다시하기 기능
4. ✅ 연기 기능
5. ✅ 지연 하이라이트

**예상 시간**: 3~4시간
**복잡도**: 중간~높음

---

## 🤔 브레인 덤프 원칙 검토

### GTD (Getting Things Done) 기준

#### David Allen의 5단계
1. **Capture**: 모든 것을 수집
2. **Clarify**: 각 항목의 의미 파악
3. **Organize**: 적절한 곳에 배치
4. **Reflect**: 검토하고 업데이트
5. **Engage**: 행동하기

#### 우리 시스템 매핑
```
Capture   → STEP 1: Brain Dump
Clarify   → STEP 2: 분류하기 (우선순위)
Organize  → STEP 2: 분류하기 (배치)
Reflect   → TOP 3 선정
Engage    → STEP 3: 행동하기
```

#### 결론
**해결책 B (상태 기반 관리)가 GTD 원칙에 가장 부합**

이유:
- ✅ 명확한 단계 구분
- ✅ 한 번에 하나씩 처리
- ✅ "완료"의 의미가 명확
- ✅ 다음 행동이 분명

**해결책 C (1:N 구조)는 GTD 원칙에서 벗어남**

이유:
- ❌ 하나의 항목을 여러 번 실행 = 명확성 저해
- ❌ 복잡도 증가 = 사용성 저하
- ❌ "2분 안에 할 수 있으면 바로 하라" 원칙 위배

---

## ✅ 최종 권장사항

### 즉시 구현 (Phase 2.1)
**3번 문제 해결: 상태 기반 관리**
- TOP 3 설정 → 분류하기에서 제거
- 완료 처리 → 모든 곳에서 숨김
- 중복 설정 방지

### 빠른 시일 내 구현 (Phase 2.2)
**1번 문제 해결: 날짜 네비게이션**
- 이전/다음 버튼 추가
- 원하는 기간 조회

### 추후 고려 (Phase 2.3)
**2번 문제 해결: 미완료 관리**
- 별도 페이지로 구현
- 오늘 다시하기, 연기 등

---

## 🎯 진행 방향 결정

어떻게 진행할까요?

**Option A**: Phase 2.1만 즉시 구현 (2~3시간)
**Option B**: Phase 2.1 + 2.2 함께 구현 (3~5시간)
**Option C**: 전체 구현 (6~9시간)

원하시는 옵션을 선택해주시면 즉시 구현 시작하겠습니다!
